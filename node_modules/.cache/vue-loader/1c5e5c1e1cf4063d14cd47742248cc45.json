{"remainingRequest":"/Users/const/Documents/Movie/Slog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/const/Documents/Movie/Slog/src/components/Movie.vue?vue&type=style&index=0&id=358f1330&scoped=true&lang=less&","dependencies":[{"path":"/Users/const/Documents/Movie/Slog/src/components/Movie.vue","mtime":1571136246630},{"path":"/Users/const/Documents/Movie/Slog/node_modules/css-loader/index.js","mtime":1552975947402},{"path":"/Users/const/Documents/Movie/Slog/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1552975955943},{"path":"/Users/const/Documents/Movie/Slog/node_modules/postcss-loader/src/index.js","mtime":1552975953218},{"path":"/Users/const/Documents/Movie/Slog/node_modules/less-loader/dist/cjs.js","mtime":1552975951040},{"path":"/Users/const/Documents/Movie/Slog/node_modules/cache-loader/dist/cjs.js","mtime":1552975946601},{"path":"/Users/const/Documents/Movie/Slog/node_modules/vue-loader/lib/index.js","mtime":1552975955943}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.movie {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background-color: #ffffff;\n}\n.search {\n    margin: 38px 0 0 28px;\n    width: 100%;\n}\n.search .tag-group {\n    margin: 22px 0 0 0;\n}\n.search .tag-group .el-tag {\n    margin: 0 18px 0 0;\n}\n.container {\n    margin: 24px 0 0 0;\n}\n.container img {\n    width: 38px;\n    height: 38px;\n}\n.dialogAdd .el-col-3 {\n    text-align: center;\n}\n.dialogEdit .el-col-3 {\n    text-align: center;\n}\n\n",{"version":3,"sources":["Movie.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Movie.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"movie\" ref=\"movie\">\n        <template>\n            <div class=\"search\" ref=\"search\">\n                <el-input placeholder=\"请输入ID,名称,主演\" v-model=\"search\" class=\"input-with-select\">\n                    <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"onSearch()\"></el-button>\n                </el-input>\n                <div class=\"tag-group\">\n                    <el-tag\n                        v-for=\"(item, index) in items\"\n                        :key=\"item.label\"\n                        :type=\"item.type\"\n                        effect=\"dark\"\n                        @click=\"onTag(index)\">\n                        {{ item.label }}\n                    </el-tag>\n                </div>\n            </div>\n            <div class=\"container\">\n                <template>\n                    <el-table :data=\"movieData\" style=\"width: 100%\" :height=\"tableHeight + 'px'\">\n                        <el-table-column prop=\"id\" label=\"序号\" width=\"60px\"></el-table-column>\n                        <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\n                        <el-table-column label=\"海报\">\n                            <template slot-scope=\"scope\">\n                                <img :src=\"scope.row.img\" />\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"主演\" prop=\"star\">\n                            <template slot-scope=\"scope\">\n                                <span>{{ onFilter(scope.row.star, 1) }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"类型\" prop=\"series\">\n                            <template slot-scope=\"scope\">\n                                <span>{{ onFilter(scope.row.series, 2) }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column prop=\"score\" label=\"评分\" width=\"80px\"></el-table-column>\n                        <el-table-column prop=\"time\" label=\"日期\"></el-table-column>\n                        <el-table-column label=\"操作\" width=\"260px\">\n                            <template slot-scope=\"scope\">\n                                <el-button\n                                size=\"mini\"\n                                type=\"success\"\n                                round\n                                @click=\"handleAdd(scope.$index, scope.row)\">新增</el-button>\n                                <el-button\n                                size=\"mini\"\n                                type=\"primary\"\n                                round\n                                @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n                                <el-button\n                                size=\"mini\"\n                                type=\"danger\"\n                                round\n                                @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                </template>\n            </div>\n        </template>\n        <!--【新增对话框】-->\n        <el-dialog title=\"新增\" :visible.sync=\"dialogAdd\" top=\"18vh\" :show-close=\"false\" width=\"760px\" custom-class=\"dialogAdd\">\n            <el-form ref=\"addForm\" :model=\"addForm\" :rules=\"addRules\" label-width=\"80px\">\n                <el-row>\n                    <el-col :span=\"12\">\n                        <el-form-item label=\"海报\">\n                            <el-upload\n                            class=\"avatar-uploader\"\n                            action=\"/api/movie/upload\"\n                            enctype=\"multipart/form-data\"\n                            method=\"post\"\n                            name=\"image[]\"\n                            :show-file-list=\"false\"\n                            :on-success=\"handleAvatarSuccess\"\n                            :before-upload=\"beforeAvatarUpload\">\n                            <img v-if=\"addForm.imageUrl\" :src=\"addForm.imageUrl\" class=\"Avatar\">\n                            <i v-else class=\"el-icon-plus Avatar-uploader-icon\"></i>\n                            </el-upload>\n                        </el-form-item>\n                        <el-form-item label=\"主演\" prop=\"star\">\n                            <el-input type=\"text\" placeholder=\"李小龙;李香凝\" v-model=\"addForm.star\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"评分\" prop=\"score\">\n                            <el-input type=\"score\" placeholder=\"9.9\" v-model=\"addForm.score\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"简介\" prop=\"describe\">\n                            <el-input type=\"textarea\" :autosize=\"{ minRows: 5, maxRows: 12}\" v-model=\"addForm.describe\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\">\n                        <el-form-item label=\"名称\" prop=\"name\">\n                            <el-input type=\"text\" placeholder=\"将夜\" v-model=\"addForm.name\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"类别\" prop=\"series\">\n                            <el-checkbox-group v-model=\"addForm.series\">\n                                <el-checkbox label=\"院线\"></el-checkbox>\n                                <el-checkbox label=\"自制\"></el-checkbox>\n                                <el-checkbox label=\"动作\"></el-checkbox>\n                                <el-checkbox label=\"喜剧\"></el-checkbox>\n                                <el-checkbox label=\"科幻\"></el-checkbox>\n                                <el-checkbox label=\"犯罪\"></el-checkbox>\n                                <el-checkbox label=\"爱情\"></el-checkbox>\n                            </el-checkbox-group>\n                        </el-form-item>\n                        <el-form-item\n                            v-for=\"(domain, index) in addForm.domains\"\n                            :label=\"'资源' + (index + 1)\"\n                            :key=\"domain.key\"\n                            :prop=\"'domains.' + index + '.value'\"\n                            :rules=\"{\n                                required: true, message: '地址不能为空', trigger: 'blur'\n                            }\"\n                            >\n                            <el-row>\n                                <el-col :span=\"21\">\n                                    <el-input v-model=\"domain.value\"></el-input>\n                                </el-col>\n                                <el-col :span=\"3\">\n                                    <template v-if=\"index == 0\">\n                                        <i class=\"el-icon-plus\" @click=\"addDomain(true)\"></i>\n                                    </template>\n                                    <template v-if=\"index != 0\">\n                                        <i class=\"el-icon-minus\" @click.prevent=\"removeDomain(domain, true)\"></i>\n                                    </template> \n                                </el-col>\n                            </el-row>\n                        </el-form-item>\n                        <el-form-item>\n                            <el-button type=\"primary\" @click=\"onAddSubmit('addForm')\">立即创建</el-button>\n                            <el-button @click=\"dialogAdd = false\">取消</el-button>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n            </el-form>\n        </el-dialog>\n        <!--【编辑对话框】-->\n        <el-dialog title=\"新增\" :visible.sync=\"dialogEdit\" top=\"18vh\" :show-close=\"false\" width=\"760px\" custom-class=\"dialogEdit\">\n            <el-form ref=\"editForm\" :model=\"editForm\" :rules=\"editRules\" label-width=\"80px\">\n                <el-row>\n                    <el-col :span=\"12\">\n                        <el-form-item label=\"海报\">\n                            <el-upload\n                            class=\"avatar-uploader\"\n                            action=\"/api/movie/upload\"\n                            enctype=\"multipart/form-data\"\n                            method=\"post\"\n                            name=\"image[]\"\n                            :show-file-list=\"false\"\n                            :on-success=\"handleAvatarSuccess\"\n                            :before-upload=\"beforeAvatarUpload\">\n                            <img v-if=\"editForm.imageUrl\" :src=\"editForm.imageUrl\" class=\"Avatar\">\n                            <i v-else class=\"el-icon-plus Avatar-uploader-icon\"></i>\n                            </el-upload>\n                        </el-form-item>\n                        <el-form-item label=\"主演\" prop=\"star\">\n                            <el-input type=\"text\" placeholder=\"李小龙;李香凝\" v-model=\"editForm.star\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"评分\" prop=\"score\">\n                            <el-input type=\"score\" placeholder=\"9.9\" v-model=\"editForm.score\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"简介\" prop=\"describe\">\n                            <el-input type=\"textarea\" :autosize=\"{ minRows: 5, maxRows: 12}\" v-model=\"editForm.describe\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\">\n                        <el-form-item label=\"名称\" prop=\"name\">\n                            <el-input type=\"text\" placeholder=\"将夜\" v-model=\"editForm.name\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"类别\" prop=\"series\">\n                            <el-checkbox-group v-model=\"editForm.series\">\n                                <el-checkbox label=\"院线\"></el-checkbox>\n                                <el-checkbox label=\"自制\"></el-checkbox>\n                                <el-checkbox label=\"动作\"></el-checkbox>\n                                <el-checkbox label=\"喜剧\"></el-checkbox>\n                                <el-checkbox label=\"科幻\"></el-checkbox>\n                                <el-checkbox label=\"犯罪\"></el-checkbox>\n                                <el-checkbox label=\"爱情\"></el-checkbox>\n                            </el-checkbox-group>\n                        </el-form-item>\n                        <el-form-item\n                            v-for=\"(domain, index) in editForm.domains\"\n                            :label=\"'资源' + (index + 1)\"\n                            :key=\"domain.key\"\n                            :prop=\"'domains.' + index + '.value'\"\n                            :rules=\"{\n                                required: true, message: '地址不能为空', trigger: 'blur'\n                            }\"\n                            >\n                            <el-row>\n                                <el-col :span=\"21\">\n                                    <el-input v-model=\"domain.value\"></el-input>\n                                </el-col>\n                                <el-col :span=\"3\">\n                                    <template v-if=\"index == 0\">\n                                        <i class=\"el-icon-plus\" @click=\"addDomain(false)\"></i>\n                                    </template>\n                                    <template v-if=\"index != 0\">\n                                        <i class=\"el-icon-minus\" @click.prevent=\"removeDomain(domain, false)\"></i>\n                                    </template> \n                                </el-col>\n                            </el-row>\n                        </el-form-item>\n                        <el-form-item>\n                            <el-button type=\"primary\" @click=\"onEditSubmit('editForm')\">立即创建</el-button>\n                            <el-button @click=\"dialogEdit = false\">取消</el-button>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n            </el-form>\n        </el-dialog>\n        <!--【删除对话框】-->\n        <el-dialog title=\"警告\" :visible.sync=\"dialogDel\" top=\"30vh\" :show-close=\"false\" width=\"320px\" custom-class=\"dialogDel\">\n            <span>你确定要删除该数据吗 ?</span>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogDel = false\">取 消</el-button>\n                <el-button @click=\"onDelSubmit()\">确 定</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script lang=\"ts\">\nexport default {\n    name: 'Movie',\n    data() {\n        return {\n            search: '',\n            select: 'aaa',\n            tableHeight: '',\n            movieData: [],\n            items: [\n                { type: 'primary', label: '院线' },\n                { type: 'success', label: '自制' },\n                { type: 'info', label: '动作' },\n                { type: 'warning', label: '喜剧' },\n                { type: 'danger', label: '科幻' },\n                { type: 'primary', label: '犯罪' },\n                { type: 'success', label: '爱情' }\n            ],\n            dialogAdd: false,\n            addForm: {\n                img: '',\n                imageUrl: '',\n                star: '',\n                score: '',\n                describe: '',\n                name: '',\n                series: [],\n                domains: [{value: ''}],\n            },\n            addRules: {\n                star: [\n                    { required: true, message: '请输入用户名', trigger: 'blur' },\n                    { min: 2, max: 200, message: '长度在 2 到 200 个字符', trigger: 'blur' }\n                ],\n                score: [\n                    { required: true, message: '请输入电影评分', trigger: 'blur' },\n                    { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }\n                ],\n                describe: [\n                    { required: true, message: '请输入电影简介', trigger: 'blur' },\n                    { min: 1, max: 500, message: '长度在 1 到 500 个字符', trigger: 'blur' }\n                ],\n                name: [\n                    { required: true, message: '请输入电影名称', trigger: 'blur' },\n                    { min: 1, max: 100, message: '长度在 1 到 100 个字符', trigger: 'blur' }\n                ],\n                series: [\n                    { type: 'array', required: true, message: '请至少选择一个类别', trigger: 'change' }\n                ]\n            },\n            dialogEdit: false,\n            editForm: {\n                id: Number,\n                index: Number,\n                img: '',\n                imageUrl: '',\n                star: '',\n                score: '',\n                describe: '',\n                name: '',\n                series: [],\n                domains: [{value: ''}],\n            },\n            editRules: {\n                star: [\n                    { required: true, message: '请输入用户名', trigger: 'blur' },\n                    { min: 2, max: 200, message: '长度在 2 到 200 个字符', trigger: 'blur' }\n                ],\n                score: [\n                    { required: true, message: '请输入电影评分', trigger: 'blur' },\n                    { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }\n                ],\n                describe: [\n                    { required: true, message: '请输入电影简介', trigger: 'blur' },\n                    { min: 1, max: 500, message: '长度在 1 到 500 个字符', trigger: 'blur' }\n                ],\n                name: [\n                    { required: true, message: '请输入电影名称', trigger: 'blur' },\n                    { min: 1, max: 100, message: '长度在 1 到 100 个字符', trigger: 'blur' }\n                ],\n                series: [\n                    { type: 'array', required: true, message: '请至少选择一个类别', trigger: 'change' }\n                ]\n            },\n            dialogDel: false,\n            delForm: {\n                index: Number,\n                id: ''\n            }\n        }\n    },\n    created() {\n        let that = this;\n        that.$axios.post('/api/movie/list', {}, {})\n        .then(function(res) {\n            console.log(res, '/api/movie/list');\n            if (res.data.length > 0) {\n                that.movieData = res.data;\n            } else {\n                that.dialogAdd = true;\n            }\n        })\n        .catch(function(err) {\n            that.$toast(that, 'error', '网络错误～');\n            that.loading = false;\n        })\n    },\n    mounted() {\n        let that = this;\n        that.tableHeight = that.$refs.movie.offsetHeight - that.$refs.search.offsetHeight - 80;\n    },\n    methods: {\n        onSearch() {\n            let that = this;\n            if (that.search) {\n                let data = {\n                    search: that.search\n                }\n                that.$axios.post('/api/movie/search', that.$qs.stringify(data), {})\n                .then(function(res) {\n                    console.log(res, '/api/movie/search');\n                    if (res.data.status) {\n                        that.movieData = res.data.data;\n                        that.$toast(that, 'success', res.data.message);\n                    } else {\n                        that.$toast(that, 'error', res.data.message);\n                    }\n                })\n                .catch(function(err) {\n                    that.$toast(that, 'error', '网络错误～');\n                    that.loading = false;\n                })\n            } else {\n                that.$toast(that, 'error', '请输入内容～');\n            }\n        },\n        onTag: function(index) {\n            let that = this;\n            let data = {\n                tag: that.items[index].label\n            }\n            that.$axios.post('/api/movie/tag', that.$qs.stringify(data), {})\n            .then(function(res) {\n                console.log(res, '/api/movie/tag');\n                if (res.data.status) {\n                    that.movieData = res.data.data;\n                    that.$toast(that, 'success', res.data.message);\n                } else {\n                    that.$toast(that, 'error', res.data.message);\n                }\n            })\n            .catch(function(err) {\n                that.$toast(that, 'error', '网络错误～');\n            })\n        },\n        onFilter(data, type) {\n            switch(type)\n            {\n                case 1:\n                    let _star = data.split(';');\n                    let str = '';\n                    for(let i = 0; i<_star.length; i++) {\n                        str += '[' + _star[i] + ']';\n                    }\n                    return str;\n                    break;\n                case 2:\n                    console.log(data, '2222');\n                    let list = '';\n                    for (let i=0; i<data.length; i++) {\n                        list += '[' + data[i] + ']';\n                    }\n                    return list;\n                    break;\n            }\n\n\n        },\n        addDomain(status) {\n            status ? this.addForm.domains.push({value: '',key: Date.now()}) : this.editForm.domains.push({value: '',key: Date.now()});\n        },\n        removeDomain(item, status) {\n            if (status) {\n                var index = this.addForm.domains.indexOf(item)\n                if (index !== -1) {\n                    this.addForm.domains.splice(index, 1)\n                }\n            } else {\n                var index = this.editForm.domains.indexOf(item)\n                if (index !== -1) {\n                    this.editForm.domains.splice(index, 1)\n                }\n            }\n        },\n        beforeAvatarUpload(file) {\n            let that = this;\n            const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n            const isLt2M = file.size / 1024 / 1024 < 2;\n\n            if (!isJPG) {\n                that.$toast(that, 'error', '上传头像图片只能是 JPG PNG 格式!');\n                return;\n            }\n            if (!isLt2M) {\n                that.$toast(that, 'error', '上传头像图片大小不能超过 2MB!');\n                return;\n            }\n            return isJPG && isLt2M;\n        },\n        handleAvatarSuccess(res, file) {\n            console.log(res, file, 'handleAvatarSuccess');\n            if (this.dialogAdd) {\n                this.addForm.img = res;\n                this.addForm.imageUrl = URL.createObjectURL(file.raw);\n            } else if (this.dialogEdit) {\n                this.editForm.img = res;\n                this.editForm.imageUrl = URL.createObjectURL(file.raw);\n            }\n        },\n        handleAdd(index, row) {\n            this.dialogAdd = true;\n        },\n        onAddSubmit(addForm) {\n            let that = this;\n            that.$refs[addForm].validate((valid)=>{\n                if (valid) {\n                    that.$axios.post('/api/movie/add', that.$qs.stringify(that.addForm), {})\n                    .then(function(res){\n                        console.log(res, '/api/movie/add');\n                        if (res.data.status) {\n                            that.dialogAdd = false;\n                            that.movieData.push(res.data.data[0]);\n                            that.$toast(that, 'success', res.data.message);\n                            console.log(that.movieData, 'movieData');\n                        } else {\n                            that.$toast(that, 'error', res.data.message);\n                        }\n                    })\n                    .catch(function(err) {\n                        that.$toast(that, 'error', '网络错误～');\n                    })\n                } else {\n                    return false;\n                }\n            })\n        },\n        handleEdit(index, row) {\n            this.editForm.id = row.id;\n            this.editForm.index = index;\n            this.editForm.img = row.poster;\n            this.editForm.imageUrl = row.img;\n            this.editForm.star = row.star;\n            this.editForm.score = row.score.toString();\n            this.editForm.describe = row.describe;\n            this.editForm.name = row.name;\n            this.editForm.series = row.series;\n            this.editForm.domains = row.domains;\n            this.dialogEdit = true;\n            console.log(index, row);\n        },\n        onEditSubmit(editForm) {\n            let that = this;\n            that.$refs[editForm].validate((valid)=>{\n                if (valid) {\n                    that.$axios.post('/api/movie/edit', that.$qs.stringify(that.editForm), {})\n                    .then(function(res){\n                        console.log(res, '/api/movie/edit');\n                        if (res.data.status) {\n                            that.dialogEdit = false;\n                            that.movieData[that.editForm.index].img = res.data.data[0].img;\n                            that.movieData[that.editForm.index].imageUrl = res.data.data[0].poster;\n                            that.movieData[that.editForm.index].star = res.data.data[0].star;\n                            that.movieData[that.editForm.index].score = res.data.data[0].score;\n                            that.movieData[that.editForm.index].describe = res.data.data[0].describe;\n                            that.movieData[that.editForm.index].name = res.data.data[0].name;\n                            that.movieData[that.editForm.index].series = res.data.data[0].series;\n                            that.movieData[that.editForm.index].domains = res.data.data[0].domains;\n                            that.$toast(that, 'success', res.data.message);\n                            console.log(that.movieData, 'movieData');\n                        } else {\n                            that.$toast(that, 'error', res.data.message);\n                        }\n                    })\n                    .catch(function(err) {\n                        that.$toast(that, 'error', '网络错误～');\n                    })\n                } else {\n                    return false;\n                }\n            })\n        },\n        handleDelete(index, row) {\n            console.log(index, row); \n            this.delForm.index = index;\n            this.delForm.id = row.id;\n            this.dialogDel = true;\n        },\n        onDelSubmit() {\n            let that = this;\n            let data = {\n                'id': that.delForm.id\n            }\n            that.$axios.post('/api/movie/del', that.$qs.stringify(data), {})\n            .then(function(res){\n                console.log(res, '/api/movie/del');\n                if (res.data.status) {\n                    that.movieData.splice(that.delForm.index, 1);\n                    that.dialogDel = false;\n                    that.$toast(that, 'success', res.data.message);\n                } else {\n                    that.$toast(that, 'error', res.data.message);\n                }\n            })\n            .catch(function(err) {\n                that.$toast(that, 'error', '网络错误～');\n            })\n        }\n    }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n.movie {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background-color: #ffffff;\n}\n.search {\n    margin: 38px 0 0 28px;\n    width: 100%;\n}\n.search .tag-group {\n    margin: 22px 0 0 0;\n}\n.search .tag-group .el-tag {\n    margin: 0 18px 0 0;\n}\n.container {\n    margin: 24px 0 0 0;\n}\n.container img {\n    width: 38px;\n    height: 38px;\n}\n.dialogAdd .el-col-3 {\n    text-align: center;\n}\n.dialogEdit .el-col-3 {\n    text-align: center;\n}\n\n</style>"]}]}