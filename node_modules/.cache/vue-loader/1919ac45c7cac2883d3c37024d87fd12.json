{"remainingRequest":"/Users/const/Documents/Movie/Slog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/const/Documents/Movie/Slog/src/components/Main.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/const/Documents/Movie/Slog/src/components/Main.vue","mtime":1570782490480},{"path":"/Users/const/Documents/Movie/Slog/node_modules/cache-loader/dist/cjs.js","mtime":1552975946601},{"path":"/Users/const/Documents/Movie/Slog/node_modules/babel-loader/lib/index.js","mtime":1552975946378},{"path":"/Users/const/Documents/Movie/Slog/node_modules/ts-loader/index.js","mtime":1552975955462},{"path":"/Users/const/Documents/Movie/Slog/node_modules/cache-loader/dist/cjs.js","mtime":1552975946601},{"path":"/Users/const/Documents/Movie/Slog/node_modules/vue-loader/lib/index.js","mtime":1552975955943}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Aside from '@/components/Aside.vue'\nimport Header from '@/components/Header.vue'\nexport default {\n    name: 'Main',\n    data() {\n        return {\n            isCollapse: false\n        };\n    },\n    components: {\n        Aside,\n        Header,\n    },\n    mounted() {\n        let that = this;\n        if (that.$getCookie('key') == '') {\n            that.$router.push('/');\n        } else {\n            // 刷新页面处理\n            let data = {\n                key: that.$getCookie('key')\n            }\n            that.$axios.post('/api/login/cookie', that.$qs.stringify(data), {})\n            .then(function(res){\n                console.log(res, '/api/login/cookie');\n                if (res.data.status) {\n                    that.$setCookie('key', that.$getCookie('key'), 1800);\n                    that.$store.commit('set_user_icon', res.data.data.icon);\n                    that.$store.commit('set_user_name', res.data.data.name);\n                } else {\n                    that.$delCookie('key');\n                    that.$router.push('/');\n                }\n            })\n\t\t\t.catch(function(err) {\n\t\t\t\tthat.$toast(that, 'error', '网络错误～');\n\t\t\t\tthat.loading = false;\n\t\t\t})\n        }\n\n        // 实时刷新cookie\n        document.addEventListener(\"mousemove\", function() {\n            if (that.$getCookie('key') != '') {\n                that.$setCookie('key', that.$getCookie('key'), 1800);\n            }\n        })\n    },\n    methods: {\n        onCollapse: function(status) {\n            this.isCollapse = !status;\n        },\n        onQuit: function() {\n            this.$delCookie('key');\n            this.$router.push('/');\n        }\n    }\n}\n",{"version":3,"sources":["Main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Main.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"main\">\n        <el-container>\n            <el-aside>\n                <Aside :isCollapse=\"isCollapse\"/>\n            </el-aside>\n            <el-container>\n                <el-header>\n                    <Header :isCollapse=\"isCollapse\" :onCollapse=\"onCollapse\" :onQuit=\"onQuit\"/>\n                </el-header>\n                <el-main>\n                    <router-view/>\n                </el-main>\n            </el-container>\n        </el-container>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport Aside from '@/components/Aside.vue'\nimport Header from '@/components/Header.vue'\nexport default {\n    name: 'Main',\n    data() {\n        return {\n            isCollapse: false\n        };\n    },\n    components: {\n        Aside,\n        Header,\n    },\n    mounted() {\n        let that = this;\n        if (that.$getCookie('key') == '') {\n            that.$router.push('/');\n        } else {\n            // 刷新页面处理\n            let data = {\n                key: that.$getCookie('key')\n            }\n            that.$axios.post('/api/login/cookie', that.$qs.stringify(data), {})\n            .then(function(res){\n                console.log(res, '/api/login/cookie');\n                if (res.data.status) {\n                    that.$setCookie('key', that.$getCookie('key'), 1800);\n                    that.$store.commit('set_user_icon', res.data.data.icon);\n                    that.$store.commit('set_user_name', res.data.data.name);\n                } else {\n                    that.$delCookie('key');\n                    that.$router.push('/');\n                }\n            })\n\t\t\t.catch(function(err) {\n\t\t\t\tthat.$toast(that, 'error', '网络错误～');\n\t\t\t\tthat.loading = false;\n\t\t\t})\n        }\n\n        // 实时刷新cookie\n        document.addEventListener(\"mousemove\", function() {\n            if (that.$getCookie('key') != '') {\n                that.$setCookie('key', that.$getCookie('key'), 1800);\n            }\n        })\n    },\n    methods: {\n        onCollapse: function(status) {\n            this.isCollapse = !status;\n        },\n        onQuit: function() {\n            this.$delCookie('key');\n            this.$router.push('/');\n        }\n    }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n.main {\n    width: 100%;\n    height: 100vh;\n}\n.main .el-container {\n    height: 100vh;\n}\n.main .el-aside {\n    width: auto !important;\n    height: 100vh;\n    background-color: rgb(84, 92, 100);\n}\n.main .el-header {\n    padding: 0 46px 0 0;\n    background-color: rgba(255, 255, 255);\n}\n.main .el-main {\n    background-color: #E9EEF3;\n}\n</style>"]}]}