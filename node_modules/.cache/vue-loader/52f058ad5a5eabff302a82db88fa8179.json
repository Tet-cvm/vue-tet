{"remainingRequest":"/Users/const/Documents/Vue/tet/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/const/Documents/Vue/tet/src/components/SignIn.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/const/Documents/Vue/tet/src/components/SignIn.vue","mtime":1552975956550},{"path":"/Users/const/Documents/Vue/tet/node_modules/babel-loader/lib/index.js","mtime":1552975946378},{"path":"/Users/const/Documents/Vue/tet/node_modules/ts-loader/index.js","mtime":1552975955462},{"path":"/Users/const/Documents/Vue/tet/node_modules/cache-loader/dist/cjs.js","mtime":1552975946601},{"path":"/Users/const/Documents/Vue/tet/node_modules/vue-loader/lib/index.js","mtime":1552975955943}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios from 'axios';\nimport Qs from 'qs';\nimport {onTips} from '@/assets/js/common.js';\nimport {setCookie, getCookie} from '@/assets/js/cookie.js'\nexport default {\n    name: 'SignIn',\n    data() {\n        return {\n\t\t\tusername: '',\n\t\t\tpassword: '',\n\t\t\tstatus: [false, false],\n\t\t\tdisabled: true,\n\t\t\tloading: false\n        };\n\t},\n\twatch: {\n\t\tusername: {\n\t\t\thandler: function() {\n\t\t\t\tthis.username.length > 2 ? (this.status[0] = true) : (this.status[0] = false);\n\t\t\t\tthis.onStatus();\n\t\t\t},\n\t\t\tdeep: true\n\t\t},\n\t\tpassword: {\n\t\t\thandler: function() {\n\t\t\t\tthis.password.length > 5 ? (this.status[1] = true) : (this.status[1] = false);\n\t\t\t\tthis.onStatus();\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n    mounted() {\n        if (getCookie('username')) {\n            this.$router.push('main');\n        }\n    },\n    methods: {\n\t\tonStatus: function() {\n\t\t\tif (this.status[0] && this.status[1]) {\n\t\t\t\tthis.disabled = false;\n\t\t\t} else {\n\t\t\t\tthis.disabled = true;\n\t\t\t}\n\t\t},\n\t\tonSubmit: function() {\n\t\t\tlet that = this;\n            that.loading = true;\n\n            let data = {\n                username: that.username,\n                password: that.password\n            };\n\n\t\t\taxios.post('/api/signin', Qs.stringify(data), {})\n\t\t\t.then(function(res) {\n                console.log(res);\n\t\t\t\tif (res.data.status) {\n                    onTips(that, 'success', res.data.info);\n                    setCookie('username', that.username, 1000*60);\n                    setTimeout(function() {\n                        that.$router.push('main');\n                    }.bind(this), 700);\n\t\t\t\t} else {\n\t\t\t\t\tonTips(that, 'error', res.data.info);\n\t\t\t\t\tthat.loading = false;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(err) {\n\t\t\t\tonTips(that, 'error', '网络错误～');\n\t\t\t\tthat.loading = false;\n\t\t\t})\n\t\t},\n    }\n}\n",null]}