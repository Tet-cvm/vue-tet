{"remainingRequest":"/Users/const/Documents/Vue/tet/node_modules/babel-loader/lib/index.js!/Users/const/Documents/Vue/tet/node_modules/ts-loader/index.js??ref--14-2!/Users/const/Documents/Vue/tet/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/const/Documents/Vue/tet/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/const/Documents/Vue/tet/src/components/Site.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/const/Documents/Vue/tet/src/components/Site.vue","mtime":1555641748505},{"path":"/Users/const/Documents/Vue/tet/node_modules/cache-loader/dist/cjs.js","mtime":1552975946601},{"path":"/Users/const/Documents/Vue/tet/node_modules/babel-loader/lib/index.js","mtime":1552975946378},{"path":"/Users/const/Documents/Vue/tet/node_modules/ts-loader/index.js","mtime":1552975955462},{"path":"/Users/const/Documents/Vue/tet/node_modules/cache-loader/dist/cjs.js","mtime":1552975946601},{"path":"/Users/const/Documents/Vue/tet/node_modules/vue-loader/lib/index.js","mtime":1552975955943}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport axios from 'axios';\nimport Qs from 'qs';\nimport { codemirror } from 'vue-codemirror';\n\nrequire(\"codemirror/mode/python/python.js\");\n\nrequire('codemirror/addon/fold/foldcode.js');\n\nrequire('codemirror/addon/fold/foldgutter.js');\n\nrequire('codemirror/addon/fold/brace-fold.js');\n\nrequire('codemirror/addon/fold/xml-fold.js');\n\nrequire('codemirror/addon/fold/indent-fold.js');\n\nrequire('codemirror/addon/fold/markdown-fold.js');\n\nrequire('codemirror/addon/fold/comment-fold.js');\n\nimport { onTips } from '@/assets/js/common.js';\nimport Crumb from '@/components/Crumb.vue';\nexport default {\n  name: 'Setting',\n  components: {\n    Crumb: Crumb,\n    codemirror: codemirror\n  },\n  data: function data() {\n    return {\n      siteData: [],\n      newDialog: false,\n      delDialog: false,\n      nginxStatus: false,\n      nowID: Number,\n      nowIndex: Number,\n      ruleNew: {\n        domain: '',\n        criterion: true,\n        start: true,\n        directory: ''\n      },\n      rules: {\n        domain: [{\n          required: true,\n          message: '请输入域名~',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 100,\n          message: '域名输入错误~',\n          trigger: 'blur'\n        }],\n        directory: [{\n          required: true,\n          message: '请输入站点根目录名称~',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 30,\n          message: '站点根目录名称错误~',\n          trigger: 'blur'\n        }]\n      },\n      codemirrorDialog: false,\n      codeMsg: '',\n      myCm: '',\n      cmOptions: {\n        value: '',\n        mode: 'text/html',\n        theme: 'foo bar',\n        indentUnit: 2,\n        smartIndent: true,\n        tabSize: 4,\n        readOnly: false,\n        showCursorWhenSelecting: true,\n        lineNumbers: true\n      }\n    };\n  },\n  created: function created() {\n    var that = this;\n    axios.post('/api/project', {}, {}).then(function (res) {\n      if (res.data.status) {\n        that.siteData = res.data.data;\n      }\n    }).catch(function (err) {\n      onTips(that, 'error', '网络错误～');\n    });\n  },\n  methods: {\n    onNginx: function onNginx() {\n      var that = this;\n      that.nginxStatus = true;\n      axios.post('/api/nginx', {}, {}).then(function (res) {\n        if (res.data.status) {\n          that.codeMsg = res.data.data;\n          that.codemirrorDialog = true;\n        }\n      }).catch(function () {\n        onTips(that, 'error', '网络错误～');\n      });\n    },\n    onSiteNginx: function onSiteNginx() {\n      var that = this;\n      var data = {\n        file: that.codeMsg\n      };\n      axios.post('/api/config', Qs.stringify(data), {}).then(function (res) {\n        if (res.data.status) {\n          that.nginxStatus = false;\n          that.codemirrorDialog = false;\n          onTips(that, 'success', res.data.info);\n        } else {\n          onTips(that, 'error', res.data.info);\n        }\n      }).catch(function () {\n        onTips(that, 'error', '网络错误～');\n      });\n    },\n    onNewSite: function onNewSite() {\n      this.newDialog = true;\n    },\n    handleSet: function handleSet(id) {\n      var that = this;\n      that.nowID = id;\n      var data = {\n        id: id\n      };\n      axios.post('/api/rest', Qs.stringify(data), {}).then(function (res) {\n        if (res.data.status) {\n          that.codeMsg = res.data.data;\n          that.codemirrorDialog = true;\n        }\n      }).catch(function (err) {\n        onTips(that, 'error', '网络错误～');\n      });\n    },\n    handleStart: function handleStart(id, index) {\n      var that = this;\n      var data = {\n        id: id,\n        status: !that.siteData[index].status ? 1 : 0\n      };\n      axios.post('/api/start', Qs.stringify(data), {}).then(function (res) {\n        if (res.data.status) {\n          that.siteData[index].status = !that.siteData[index].status;\n          onTips(that, 'success', res.data.info);\n        } else {\n          onTips(that, 'error', res.data.info);\n        }\n      }).catch(function (err) {\n        onTips(that, 'error', '网络错误～');\n      });\n    },\n    handleDel: function handleDel(id, index) {\n      this.delDialog = true;\n      this.nowID = id;\n      this.nowIndex = index;\n    },\n    submitNew: function submitNew(ruleNew) {\n      var that = this;\n      that.$refs[ruleNew].validate(function (valid) {\n        if (valid) {\n          var data = {\n            domain: that.ruleNew.domain,\n            criterion: that.ruleNew.criterion ? 1 : 0,\n            status: that.ruleNew.start ? 1 : 0,\n            directory: that.ruleNew.directory\n          };\n          axios.post('/api/new', Qs.stringify(data), {}).then(function (res) {\n            if (res.data.status) {\n              that.newDialog = false;\n              that.siteData.push(res.data.data[0]);\n              onTips(that, 'success', res.data.info);\n            } else {\n              onTips(that, 'error', res.data.info);\n            }\n          }).catch(function (err) {\n            onTips(that, 'error', '网络错误～');\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    onDelete: function onDelete() {\n      var that = this;\n      var data = {\n        id: that.nowID\n      };\n      axios.post('/api/clear', Qs.stringify(data), {}).then(function (res) {\n        if (res.data.status) {\n          that.delDialog = false;\n          that.siteData.splice(that.nowIndex, 1);\n          onTips(that, 'success', res.data.info);\n        }\n      }).catch(function () {\n        onTips(that, 'error', '网络错误～');\n      });\n    },\n    onSiteFile: function onSiteFile() {\n      var that = this;\n      var data = {\n        id: that.nowID,\n        file: that.codeMsg\n      };\n      axios.post('/api/adapt', Qs.stringify(data), {}).then(function (res) {\n        if (res.data.status) {\n          that.codemirrorDialog = false;\n          onTips(that, 'success', res.data.info);\n        } else {\n          onTips(that, 'error', res.data.info);\n        }\n      }).catch(function () {\n        onTips(that, 'error', '网络错误～');\n      });\n    },\n    onChange: function onChange() {\n      console.log('2345');\n    }\n  }\n};",{"version":3,"sources":["/Users/const/Documents/Vue/tet/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/const/Documents/Vue/tet/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/const/Documents/Vue/tet/src/components/Site.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios from 'axios';\nimport Qs from 'qs';\nimport { codemirror } from 'vue-codemirror'\nrequire(\"codemirror/mode/python/python.js\")\nrequire('codemirror/addon/fold/foldcode.js')\nrequire('codemirror/addon/fold/foldgutter.js')\nrequire('codemirror/addon/fold/brace-fold.js')\nrequire('codemirror/addon/fold/xml-fold.js')\nrequire('codemirror/addon/fold/indent-fold.js')\nrequire('codemirror/addon/fold/markdown-fold.js')\nrequire('codemirror/addon/fold/comment-fold.js')\nimport {onTips} from '@/assets/js/common.js';\nimport Crumb from '@/components/Crumb.vue'\nexport default {\n    name: 'Setting',\n    components: {\n        Crumb,\n        codemirror\n    },\n    data() {\n        return {\n            siteData: [],\n            newDialog: false,\n            delDialog: false,\n            nginxStatus: false,\n            nowID: Number,\n            nowIndex: Number,\n            ruleNew: {\n                domain: '',\n                criterion: true,\n                start: true,\n                directory: ''\n            },\n            rules: {\n            domain: [\n                { required: true, message: '请输入域名~', trigger: 'blur' },\n                { min: 2, max: 100, message: '域名输入错误~', trigger: 'blur' }\n            ],\n            directory: [\n                { required: true, message: '请输入站点根目录名称~', trigger: 'blur' },\n                { min: 3, max: 30, message: '站点根目录名称错误~', trigger: 'blur' }\n            ]\n            },\n            codemirrorDialog: false,\n            codeMsg: '',\n            myCm: '',\n            cmOptions: {\n                value: '',\n                mode: 'text/html',\n                theme: 'foo bar',\n                indentUnit: 2,\n                smartIndent: true,\n                tabSize: 4,\n                readOnly: false,\n                showCursorWhenSelecting: true,\n                lineNumbers: true,\n            }\n        }\n    },\n    created() {\n        let that = this;\n        axios.post('/api/project', {}, {})\n        .then(function(res) {\n            if (res.data.status) {\n                that.siteData = res.data.data;\n            }\n        })\n        .catch(function(err) {\n            onTips(that, 'error', '网络错误～');\n        })\n    },\n    methods: {\n        onNginx: function() {\n            let that = this;\n            that.nginxStatus = true;\n            axios.post('/api/nginx', {}, {})\n            .then(function(res) {\n                if (res.data.status) {\n                    that.codeMsg = res.data.data;\n                    that.codemirrorDialog = true;\n                }\n            })\n            .catch(function() {\n                onTips(that, 'error', '网络错误～');\n            })\n        },\n        onSiteNginx: function() {\n            let that = this;\n            let data = {\n                file: that.codeMsg\n            };\n            axios.post('/api/config', Qs.stringify(data), {})\n            .then(function(res) {\n                if (res.data.status) {\n                    that.nginxStatus = false;\n                    that.codemirrorDialog = false;\n                    onTips(that, 'success', res.data.info);\n                } else {\n                    onTips(that, 'error', res.data.info);\n                }\n            })\n            .catch(function() {\n                onTips(that, 'error', '网络错误～');\n            })\n        },\n        onNewSite: function() {\n            this.newDialog = true;\n        },\n        handleSet: function(id) {\n            let that = this;\n            that.nowID = id;\n            let data = {\n                id: id\n            };\n            axios.post('/api/rest', Qs.stringify(data), {})\n            .then(function(res) {\n                if (res.data.status) {\n                    that.codeMsg = res.data.data;\n                    that.codemirrorDialog = true;\n                }\n            })\n            .catch(function(err) {\n                onTips(that, 'error', '网络错误～');\n            })\n        },\n        handleStart: function(id, index) {\n            let that = this;\n            let data = {\n                id: id,\n                status: !that.siteData[index].status ? 1 : 0\n            };\n            axios.post('/api/start', Qs.stringify(data), {})\n            .then(function(res) {\n                if (res.data.status) {\n                    that.siteData[index].status = !that.siteData[index].status;\n                    onTips(that, 'success', res.data.info);\n                } else {\n                    onTips(that, 'error', res.data.info);\n                }\n            })\n            .catch(function(err) {\n                onTips(that, 'error', '网络错误～');\n            })\n        },\n        handleDel: function(id, index) {\n            this.delDialog = true;\n            this.nowID = id;\n            this.nowIndex = index;\n        },\n        submitNew: function(ruleNew) {\n            let that = this;\n            that.$refs[ruleNew].validate((valid) => {\n                if (valid) {\n                    let data = {\n                        domain: that.ruleNew.domain,\n                        criterion: that.ruleNew.criterion ? 1 : 0,\n                        status: that.ruleNew.start ? 1 : 0,\n                        directory: that.ruleNew.directory\n                    }\n                    axios.post('/api/new', Qs.stringify(data), {})\n                    .then(function(res) {\n                        if (res.data.status) {\n                            that.newDialog = false;\n                            that.siteData.push(res.data.data[0]);\n                            onTips(that, 'success', res.data.info);\n                        } else {\n                            onTips(that, 'error', res.data.info);\n                        }\n                    })\n                    .catch(function(err) {\n                        onTips(that, 'error', '网络错误～');\n                    })\n                } else {\n                    return false;\n                }\n            });\n        },\n        onDelete: function() {\n            let that = this;\n            let data = {\n                id: that.nowID\n            }\n            axios.post('/api/clear', Qs.stringify(data), {})\n            .then(function(res) {\n                if (res.data.status) {\n                    that.delDialog = false;\n                    that.siteData.splice(that.nowIndex, 1)\n                    onTips(that, 'success', res.data.info);\n                }\n            })\n            .catch(function() {\n                onTips(that, 'error', '网络错误～');\n            })\n        },\n        onSiteFile: function() {\n            let that = this;\n            let data = {\n                id: that.nowID,\n                file: that.codeMsg\n            };\n            axios.post('/api/adapt', Qs.stringify(data), {})\n            .then(function(res) {\n                if (res.data.status) {\n                    that.codemirrorDialog = false;\n                    onTips(that, 'success', res.data.info);\n                } else {\n                    onTips(that, 'error', res.data.info);\n                }\n            })\n            .catch(function() {\n                onTips(that, 'error', '网络错误～');\n            })\n        },\n        onChange: function() {\n            console.log('2345')\n        }\n    }\n}\n"],"sourceRoot":""}]}