{"remainingRequest":"/Users/const/Documents/Movie/Slog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/const/Documents/Movie/Slog/src/components/Group.vue?vue&type=style&index=0&id=d33cea02&scoped=true&lang=less&","dependencies":[{"path":"/Users/const/Documents/Movie/Slog/src/components/Group.vue","mtime":1553245384249},{"path":"/Users/const/Documents/Movie/Slog/node_modules/css-loader/index.js","mtime":1552975947402},{"path":"/Users/const/Documents/Movie/Slog/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1552975955943},{"path":"/Users/const/Documents/Movie/Slog/node_modules/postcss-loader/src/index.js","mtime":1552975953218},{"path":"/Users/const/Documents/Movie/Slog/node_modules/less-loader/dist/cjs.js","mtime":1552975951040},{"path":"/Users/const/Documents/Movie/Slog/node_modules/cache-loader/dist/cjs.js","mtime":1552975946601},{"path":"/Users/const/Documents/Movie/Slog/node_modules/vue-loader/lib/index.js","mtime":1552975955943}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.tetUser {\n  margin: 24px auto 0 auto;\n  width: 94%;\n}\n.dialogAdd .dialogEdit .dialogDelete {\n    border-radius: 4px;\n}\n.dialogAdd .el-dialog__header {\n    text-align: center;\n}\n.dialogAdd .dialogEdit .el-input__inner {\n    width: 90%;\n}\n.dialogAdd .el-button {\n    width: 40%;\n}\n.dialogAdd .el-button+.el-button {\n    margin: 0 20px 0 30px;\n}\n.dialogEdit .el-dialog__header {\n    text-align: center;\n}\n.dialogEdit .el-input__inner {\n    width: 90%;\n}\n.dialogEdit .el-button {\n    width: 40%;\n}\n.dialogEdit .el-button+.el-button {\n    margin: 0 20px 0 30px;\n}\n.dialogDelete .el-dialog__header {\n    text-align: center;\n}\n.dialogDelete .el-dialog__body {\n    text-align: center;\n    font-size: 16px;\n}\n.dialogDelete .el-input__inner {\n    width: 90%;\n}\n.dialogDelete .el-button {\n    width: 40%;\n}\n.dialogDelete .el-button+.el-button {\n    margin: 0 20px 0 30px;\n}\n",{"version":3,"sources":["Group.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Group.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"group\">\n    <Crumb title=\"Group\"/>\n    <div class=\"tetUser\">\n      <el-table\n        :data=\"userData\"\n        style=\"width: 100%\"\n        height=\"640\"\n        >\n        <el-table-column\n        label=\"日期\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.time }}</span>\n        </template>\n        </el-table-column>\n        <el-table-column\n        label=\"权限\">\n        <template slot-scope=\"scope\">\n          <p>{{ onLevel(scope.row.level) }}</p>\n        </template>\n        </el-table-column>\n        <el-table-column\n        label=\"用户名\">\n        <template slot-scope=\"scope\">\n          <p>{{ scope.row.username }}</p>\n        </template>\n        </el-table-column>\n        <el-table-column\n        label=\"真是姓名\">\n        <template slot-scope=\"scope\">\n          <p>{{ scope.row.realname }}</p>\n        </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"240\">\n            <template slot-scope=\"scope\">\n            <el-button\n            size=\"mini\"\n            type=\"primary\"\n            @click=\"handleAdd(scope.$index, scope.row)\">新增</el-button>\n            <el-button\n            size=\"mini\"\n            type=\"success\"\n            @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n                <template v-if=\"scope.row.id == 1\">\n                    <el-button\n                    size=\"mini\"\n                    type=\"danger\"\n                    disabled\n                    @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n                </template>\n                <template v-else>\n                    <el-button\n                    size=\"mini\"\n                    type=\"danger\"\n                    @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n                </template>\n            </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div>\n    <!--【新增】-->\n    <el-dialog\n        title=\"新增用户\"\n        :visible.sync=\"dialogAdd\"\n        width=\"30%\"\n        :show-close=\"false\"\n        custom-class=\"dialogAdd\">\n        <span>\n            <el-form ref=\"form\" :model=\"add\" label-width=\"80px\">\n                <el-form-item label=\"用户名\">\n                    <el-input v-model=\"add.username\" type=\"text\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"真是姓名\">\n                    <el-input v-model=\"add.realname\" type=\"text\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"权限\">\n                    <template>\n                    <el-select v-model=\"add.level\" placeholder=\"请选择\">\n                        <el-option\n                            v-for=\"item in options\"\n                            :key=\"item.value\"\n                            :label=\"item.label\"\n                            :value=\"item.value\"\n                            :disabled=\"item.disabled\">\n                        </el-option>\n                    </el-select>\n                    </template>\n                </el-form-item>\n                <el-form-item label=\"密码\">\n                    <el-input v-model=\"add.password\" type=\"password\"></el-input>\n                </el-form-item>\n            </el-form>\n        </span>\n        <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogAdd = false\">取 消</el-button>\n        <el-button type=\"primary\" :disabled=\"!addStatus\" @click=\"onAdd()\">确 定</el-button>\n        </span>\n    </el-dialog>\n    <!--【编辑】-->\n    <el-dialog\n        title=\"编辑用户\"\n        :visible.sync=\"dialogEdit\"\n        width=\"30%\"\n        :show-close=\"false\"\n        custom-class=\"dialogEdit\">\n        <span>\n            <el-form ref=\"form\" :model=\"edit\" label-width=\"80px\">\n                <input type=\"hidden\" v-model=\"edit.id\"/>\n                <el-form-item label=\"用户名\">\n                    <el-input v-model=\"edit.username\" type=\"text\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"真实姓名\">\n                    <el-input v-model=\"edit.realname\" type=\"text\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"旧密码\">\n                    <el-input v-model=\"edit.oldpwd\" type=\"text\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"新密码\">\n                    <el-input v-model=\"edit.password\" type=\"text\"></el-input>\n                </el-form-item>\n            </el-form>\n        </span>\n        <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogEdit = false\">取 消</el-button>\n        <el-button type=\"primary\" :disabled=\"!editStatus\" @click=\"onEdit()\">确 定</el-button>\n        </span>\n    </el-dialog>\n    <!--【删除】-->\n    <el-dialog\n        title=\"删除用户\"\n        :visible.sync=\"dialogDelete\"\n        width=\"30%\"\n        :show-close=\"false\"\n        custom-class=\"dialogDelete\">\n        <span>你确定删除这个用户吗？</span>\n        <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogDelete = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"onDelete()\">确 定</el-button>\n        </span>\n    </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport axios from 'axios';\nimport Qs from 'qs';\nimport {onTips} from '@/assets/js/common.js';\nimport Crumb from '@/components/Crumb.vue'\nexport default {\n    name: 'Group',\n    components: {\n        Crumb\n    },\n    data() {\n        return {\n            userData: [],\n            dialogAdd: false,\n            addStatus: false,\n            add: {\n                username: '',\n                realname: '',\n                level: '',\n                password: ''\n            },\n            dialogEdit: false,\n            editStatus: false,\n            edit: {\n                id: '',\n                username: '',\n                realname: '',\n                password: '',\n                oldpwd: ''\n            },\n            dialogDelete: false,\n            del: {\n                id: '',\n                index: ''\n            },\n            options: [\n                {value: 0, label: '超级管理员', disabled: true},\n                {value: 1, label: '管理员'},\n                {value: 2, label: '用户'}\n            ]        \n        }\n    },\n    created() {\n        let that = this;\n        axios.post('/api/list', {}, {})\n        .then(function(res) {\n            if (res.data.status) {\n                that.userData = res.data.data;\n            } else {\n                onTips(that, 'error', res.data.info);\n            }\n        })\n        .catch(function(err) {\n            onTips(that, 'error', '网络错误～');\n        })\n    },\n    watch: {\n        add: {\n            handler: function() {\n                if (this.add.username != '' && this.add.realname != '' && this.add.password != '') {\n                    this.addStatus = true;\n                } else {\n                    this.addStatus = false;\n                }\n            },\n            deep: true\n        },\n        edit: {\n            handler: function() {\n                if (this.edit.username != '' && this.edit.realname != '' && this.edit.password != '******') {\n                    this.editStatus = true;\n                } else {\n                    this.editStatus = false;\n                }\n            },\n            deep: true\n        }\n    },\n    methods: {\n        handleAdd(index, row) {\n            this.dialogAdd = true;\n        },\n        handleEdit(index, row) {\n            this.dialogEdit = true;\n            this.edit.id = row.id;\n            this.edit.username = row.username;\n            this.edit.realname = row.realname;\n            this.edit.password = '';\n            this.edit.index = index;\n        },\n        handleDelete(index, row) {\n            this.dialogDelete = true;\n            this.del.id = row.id;\n            this.del.index = index;\n        },\n        onAdd: function() {\n            let that = this;\n            let data = {\n                level: that.add.level,\n                username: that.add.username,\n                realname: that.add.realname,\n                password: that.add.password\n            };\n            axios.post('/api/add', Qs.stringify(data), {})\n            .then(function(res) {\n                if (res.data.status) {\n                    that.dialogAdd = false;\n                    that.userData.push(res.data.data[0]);\n                    onTips(that, 'success', res.data.info);\n                } else {\n                    onTips(that, 'error', res.data.info);\n                }\n            })\n            .catch(function(err) {\n                onTips(that, 'error', '网络错误～');\n            })\n        },\n        onEdit: function() {\n            let that = this;\n            let data = {\n                id: that.edit.id,\n                username: that.edit.username,\n                realname: that.edit.realname,\n                password: that.edit.password,\n                oldpwd: that.edit.oldpwd\n            };\n\n            axios.post('/api/edit', Qs.stringify(data), {})\n            .then(function(res) {\n                if (res.data.status) {\n                    let index = that.edit.index;\n                    that.userData[index].username = that.edit.username;\n                    that.userData[index].realname = that.edit.realname;                    \n                    that.dialogEdit = false;\n                    onTips(that, 'success', res.data.info);\n                } else {\n                    onTips(that, 'error', res.data.info);\n                }\n            })\n            .catch(function(err) {\n                onTips(that, 'error', '网络错误～');\n            })\n        },\n        onDelete: function() {\n            let that = this;\n            this.dialogDelete = false;\n            let data = {\n                id: that.del.id\n            };\n            axios.post('/api/delete', Qs.stringify(data), {})\n            .then(function(res) {\n                if (res.data.status) {\n                    that.userData.splice(that.del.index, 1);\n                    onTips(that, 'success', res.data.info);\n                } else {\n                    onTips(that, 'error', res.data.info);\n                }\n            })\n            .catch(function(err) {\n                onTips(that, 'error', '网络错误～');\n            })\n        },\n        onLevel: function(level) {\n            let _level;\n            switch(level)\n            {\n                case 0:\n                  _level =  '超级管理员';\n                  break;\n                case 1:\n                  _level =  '管理员';\n                  break;\n                case 2:\n                  _level =  '用户';\n                  break;\n            }\n            return _level;\n        }\n    }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n.tetUser {\n  margin: 24px auto 0 auto;\n  width: 94%;\n}\n.dialogAdd .dialogEdit .dialogDelete {\n    border-radius: 4px;\n}\n.dialogAdd .el-dialog__header {\n    text-align: center;\n}\n.dialogAdd .dialogEdit .el-input__inner {\n    width: 90%;\n}\n.dialogAdd .el-button {\n    width: 40%;\n}\n.dialogAdd .el-button+.el-button {\n    margin: 0 20px 0 30px;\n}\n.dialogEdit .el-dialog__header {\n    text-align: center;\n}\n.dialogEdit .el-input__inner {\n    width: 90%;\n}\n.dialogEdit .el-button {\n    width: 40%;\n}\n.dialogEdit .el-button+.el-button {\n    margin: 0 20px 0 30px;\n}\n.dialogDelete .el-dialog__header {\n    text-align: center;\n}\n.dialogDelete .el-dialog__body {\n    text-align: center;\n    font-size: 16px;\n}\n.dialogDelete .el-input__inner {\n    width: 90%;\n}\n.dialogDelete .el-button {\n    width: 40%;\n}\n.dialogDelete .el-button+.el-button {\n    margin: 0 20px 0 30px;\n}\n</style>"]}]}