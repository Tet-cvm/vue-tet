{"remainingRequest":"/Users/const/Documents/Vue/vue-tet/node_modules/babel-loader/lib/index.js!/Users/const/Documents/Vue/vue-tet/node_modules/ts-loader/index.js??ref--14-2!/Users/const/Documents/Vue/vue-tet/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/const/Documents/Vue/vue-tet/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/const/Documents/Vue/vue-tet/src/components/Home.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/const/Documents/Vue/vue-tet/src/components/Home.vue","mtime":1557460125639},{"path":"/Users/const/Documents/Vue/vue-tet/node_modules/cache-loader/dist/cjs.js","mtime":1552975946601},{"path":"/Users/const/Documents/Vue/vue-tet/node_modules/babel-loader/lib/index.js","mtime":1552975946378},{"path":"/Users/const/Documents/Vue/vue-tet/node_modules/ts-loader/index.js","mtime":1552975955462},{"path":"/Users/const/Documents/Vue/vue-tet/node_modules/cache-loader/dist/cjs.js","mtime":1552975946601},{"path":"/Users/const/Documents/Vue/vue-tet/node_modules/vue-loader/lib/index.js","mtime":1552975955943}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport axios from 'axios';\nimport { onTips } from '@/assets/js/common.js';\nimport * as echarts from 'echarts';\nimport Crumb from '@/components/Crumb.vue';\nexport default {\n  props: ['isNotice'],\n  name: 'Home',\n  components: {\n    Crumb: Crumb\n  },\n  data: function data() {\n    return {\n      installDialog: false,\n      lamp: ['Linux', 'Apache', 'MySQL', 'PHP'],\n      lnmp: ['Linux', 'Nginx', 'MySQL', 'PHP'],\n      domLoad: null,\n      domCpu: null,\n      domMemory: null,\n      domDisk: null,\n      nowLoadData: 18,\n      nowCpuData: 18,\n      nowMemoryData: 18,\n      nowDiskData: 18,\n      getLoadData: Number,\n      getCpuData: Number,\n      getMemoryData: Number,\n      getDiskData: Number,\n      dangerColor: '#09BB07',\n      cvmName: '',\n      circle: 5,\n      loading: false,\n      loadTxt: '重启服务器',\n      round: {\n        'load': 0,\n        'cpu': 0,\n        'memory': 0,\n        'disk': 0\n      }\n    };\n  },\n  created: function created() {\n    var that = this;\n    axios.post('/api/origin', {}, {}).then(function (res) {\n      if (res.data.status) {\n        if (!res.data.data) {\n          that.installDialog = true;\n        }\n      } else {\n        onTips(that, 'error', res.data.info);\n      }\n    }).catch(function (err) {\n      onTips(that, 'error', '网络错误~');\n    });\n    that.axiosRound();\n    var Timer = setInterval(function () {\n      that.axiosRound();\n    }, 3600);\n    axios.post('/api/message', {}, {}).then(function (res) {\n      if (res.data.status) {\n        that.cvmName = res.data.data;\n      } else {\n        onTips(that, 'error', res.data.info);\n      }\n    }).catch(function (err) {\n      onTips(that, 'error', '网络错误~');\n    });\n    axios.post('/api/chart', {}, {}).then(function (res) {\n      console.log(res);\n\n      if (res.data.status) {\n        var categroy = echarts.init(document.getElementById('categroy'));\n        that.onCategroy(categroy, res.data.data.ltime, res.data.data.ntime, res.data.data.ldata, res.data.data.ndata);\n      } else {\n        onTips(that, 'error', res.data.info);\n      }\n    }).catch(function (err) {\n      onTips(that, 'error', '网络错误~');\n    });\n  },\n  watch: {\n    getLoadData: function getLoadData() {\n      this.onIncrease(this.domLoad, this.nowLoadData, this.getLoadData);\n    },\n    getCpuData: function getCpuData() {\n      this.onIncrease(this.domCpu, this.nowCpuData, this.getCpuData);\n    },\n    getMemoryData: function getMemoryData() {\n      this.onIncrease(this.domMemory, this.nowMemoryData, this.getMemoryData);\n    },\n    getDiskData: function getDiskData() {\n      this.onIncrease(this.domDisk, this.nowDiskData, this.getDiskData);\n    }\n  },\n  mounted: function mounted() {\n    this.$nextTick(function () {\n      this.domLoad = echarts.init(document.getElementById('tetLoad'));\n      this.domCpu = echarts.init(document.getElementById('tetCpu'));\n      this.domMemory = echarts.init(document.getElementById('tetMemory'));\n      this.domDisk = echarts.init(document.getElementById('tetDisk'));\n      this.onInitialize(this.domLoad, '负载均衡', this.nowLoadData);\n      this.onInitialize(this.domCpu, 'CPU使用率', this.nowCpuData);\n      this.onInitialize(this.domMemory, '内存使用率', this.nowMemoryData);\n      this.onInitialize(this.domDisk, '硬盘使用率', this.nowDiskData);\n    });\n  },\n  methods: {\n    onInstallLamp: function onInstallLamp() {\n      var that = this;\n      axios.post('/shell/lamp', {}, {}).then(function (res) {\n        if (res.data.status) {\n          console.log(res);\n        } else {\n          onTips(that, 'error', res.data.info);\n        }\n      }).catch(function (err) {\n        onTips(that, 'error', '网络错误~');\n      });\n    },\n    onInstallLnmp: function onInstallLnmp() {\n      var that = this;\n      axios.post('/shell/lnmp', {}, {}).then(function (res) {\n        if (res.data.status) {\n          that.installDialog = false;\n        } else {\n          onTips(that, 'error', res.data.info);\n        }\n      }).catch(function (err) {\n        onTips(that, 'error', '网络错误~');\n      });\n    },\n    axiosRound: function axiosRound() {\n      var that = this;\n      axios.post('/api/round', {}, {}).then(function (res) {\n        console.log(res.data);\n\n        if (res.data.status) {\n          var Data = res.data.data;\n          that.getLoadData = Data.load;\n          that.getCpuData = Data.cpu;\n          that.getMemoryData = Data.memory;\n          that.getDiskData = Data.disk;\n        } else {\n          onTips(that, 'error', res.data.info);\n        }\n      }).catch(function (err) {\n        onTips(that, 'error', '网络错误~');\n      });\n    },\n    //初始化数据\n    onInitialize: function onInitialize(myChart, Title, Data) {\n      var option = {\n        title: {\n          text: Title,\n          left: 'center',\n          bottom: 4,\n          textStyle: {\n            fontSize: 16,\n            fontWeight: 'normal',\n            color: '#666666'\n          }\n        },\n        tooltip: {\n          show: true,\n          confine: true,\n          trigger: 'item',\n          formatter: \"{a} <br/> 比例：( {d}% )\"\n        },\n        color: ['#b2b2b2', this.dangerColor],\n        calculable: false,\n        series: [{\n          name: Title,\n          type: 'pie',\n          radius: ['47%', '60%'],\n          hoverAnimation: false,\n          legendHoverLink: false,\n          avoidLabelOverlap: false,\n          label: {\n            normal: {\n              show: false,\n              position: 'center'\n            },\n            emphasis: {\n              show: false\n            }\n          },\n          labelLine: {\n            normal: {\n              show: false\n            }\n          },\n          data: [{\n            value: (100 - Data).toFixed(1),\n            name: (100 - Data).toFixed(1) + '%'\n          }, {\n            value: Data.toFixed(1),\n            name: Data.toFixed(1) + '%',\n            label: {\n              show: true,\n              fontSize: '19',\n              fontWeight: 'bold'\n            }\n          }]\n        }]\n      };\n      myChart.setOption(option);\n    },\n    //数据动态增减\n    onIncrease: function onIncrease(myChart, nowData, getData) {\n      var that = this;\n\n      if (nowData != getData) {\n        var timer = setInterval(function () {\n          if (nowData < getData) {\n            nowData++;\n            that.onApply(myChart, nowData);\n\n            if (nowData >= getData) {\n              that.nowLoadData = that.getLoadData;\n              that.nowCpuData = that.getCpuData;\n              that.nowMemoryData = that.getMemoryData;\n              that.nowDiskData = that.getDiskData;\n              clearInterval(timer);\n            }\n          }\n\n          if (nowData > getData) {\n            nowData--;\n            that.onApply(myChart, nowData);\n\n            if (nowData <= getData) {\n              that.nowLoadData = that.getLoadData;\n              that.nowCpuData = that.getCpuData;\n              that.nowMemoryData = that.getMemoryData;\n              that.nowDiskData = that.getDiskData;\n              clearInterval(timer);\n            }\n          }\n        }, 45);\n      }\n    },\n    onApply: function onApply(myChart, Data) {\n      var that = this;\n      Data > 68 ? Data > 86 ? this.dangerColor = '#b44038' : this.dangerColor = '#c9856b' : this.dangerColor = '#09BB07';\n      myChart.setOption({\n        animation: false,\n        color: ['#b2b2b2', this.dangerColor],\n        series: [{\n          data: [{\n            value: (100 - Data).toFixed(1),\n            name: (100 - Data).toFixed(1) + '%'\n          }, {\n            value: Data.toFixed(1),\n            name: Data.toFixed(1) + '%',\n            label: {\n              show: true,\n              fontSize: '19',\n              fontWeight: 'bold'\n            }\n          }]\n        }]\n      });\n    },\n    reLoad: function reLoad() {\n      var that = this;\n\n      if (!that.loading) {\n        that.loading = true;\n        that.loadTxt = '重启中...';\n        axios.post('/api/restart', {}, {}).then(function (res) {\n          if (res.data.status) {\n            that.loading = false;\n            that.loadTxt = '重启服务器';\n          }\n\n          console.log(res);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    },\n    onCategroy: function onCategroy(myChart, lastTime, nowTime, lastData, nowData) {\n      var option = {\n        color: ['#e64340', '#09BB07'],\n        tooltip: {\n          trigger: 'none',\n          axisPointer: {\n            type: 'cross'\n          }\n        },\n        legend: {\n          data: ['昨日流量', '今日流量']\n        },\n        grid: {\n          top: 70,\n          bottom: 42\n        },\n        xAxis: [{\n          type: 'category',\n          axisTick: {\n            alignWithLabel: true\n          },\n          axisLine: {\n            onZero: false,\n            lineStyle: {\n              color: '#333333'\n            }\n          },\n          axisPointer: {\n            label: {\n              formatter: function formatter(params) {\n                return '今日  ' + params.value + (params.seriesData.length ? '：' + params.seriesData[0].data : '');\n              }\n            }\n          },\n          data: nowTime\n        }, {\n          type: 'category',\n          axisTick: {\n            alignWithLabel: true\n          },\n          axisLine: {\n            onZero: false,\n            lineStyle: {\n              color: '#999999'\n            }\n          },\n          axisPointer: {\n            label: {\n              formatter: function formatter(params) {\n                return '昨日  ' + params.value + (params.seriesData.length ? '：' + params.seriesData[0].data : '');\n              }\n            }\n          },\n          data: lastTime\n        }],\n        yAxis: [{\n          type: 'value'\n        }],\n        series: [{\n          name: '今日流量',\n          type: 'line',\n          xAxisIndex: 1,\n          smooth: true,\n          data: nowData\n        }, {\n          name: '昨日流量',\n          type: 'line',\n          smooth: true,\n          data: lastData\n        }]\n      };\n      myChart.setOption(option);\n    }\n  }\n};",{"version":3,"sources":["/Users/const/Documents/Vue/vue-tet/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/const/Documents/Vue/vue-tet/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/const/Documents/Vue/vue-tet/src/components/Home.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios from 'axios';\nimport Qs from 'qs';\nimport {onTips} from '@/assets/js/common.js';\nimport * as echarts from 'echarts';\nimport Crumb from '@/components/Crumb.vue'\nexport default {\n    props: ['isNotice'],\n    name: 'Home',\n    components: {\n        Crumb\n    },\n    data() {\n        return {\n            installDialog: false,\n            lamp: ['Linux','Apache', 'MySQL', 'PHP'],\n            lnmp: ['Linux','Nginx', 'MySQL', 'PHP'],\n            domLoad: null,\n            domCpu: null,\n            domMemory: null,\n            domDisk: null,\n            nowLoadData: 18,\n            nowCpuData: 18,\n            nowMemoryData: 18,\n            nowDiskData: 18,\n            getLoadData: Number,\n            getCpuData: Number,\n            getMemoryData: Number,\n            getDiskData: Number,\n            dangerColor: '#09BB07',\n            cvmName: '',\n            circle: 5,\n            loading: false,\n            loadTxt: '重启服务器',\n            round: {'load': 0, 'cpu': 0, 'memory': 0, 'disk': 0},\n        }\n    },\n    created() {\n        let that = this;\n\n        axios.post('/api/origin', {}, {})\n        .then(function(res) {\n            if (res.data.status) {\n                if (!res.data.data) {\n                    that.installDialog = true;\n                }\n            } else {\n                onTips(that, 'error', res.data.info);\n            }\n        })\n        .catch(function(err) {\n            onTips(that, 'error', '网络错误~');\n        })\n\n        that.axiosRound();\n        let Timer = setInterval(function() {\n            that.axiosRound();\n        }, 3600);\n\n        axios.post('/api/message', {}, {})\n        .then(function(res) {\n            if (res.data.status) {\n                that.cvmName = res.data.data;\n            } else {\n                onTips(that, 'error', res.data.info);\n            }\n        })\n        .catch(function(err) {\n            onTips(that, 'error', '网络错误~');\n        })\n\n        axios.post('/api/chart', {}, {})\n        .then(function(res){\n            console.log(res);\n            if (res.data.status) {\n                var categroy = echarts.init(document.getElementById('categroy'));\n                that.onCategroy(categroy, res.data.data.ltime, res.data.data.ntime, res.data.data.ldata, res.data.data.ndata);\n            } else {\n                onTips(that, 'error', res.data.info);\n            }\n        })\n        .catch(function(err){\n            onTips(that, 'error', '网络错误~');\n        })\n    },\n    watch: {\n        getLoadData: function() {\n            this.onIncrease(this.domLoad, this.nowLoadData, this.getLoadData);\n        },\n        getCpuData: function() {\n            this.onIncrease(this.domCpu, this.nowCpuData, this.getCpuData);\n        },\n        getMemoryData: function() {\n            this.onIncrease(this.domMemory, this.nowMemoryData, this.getMemoryData);\n        },\n        getDiskData: function() {\n            this.onIncrease(this.domDisk, this.nowDiskData, this.getDiskData);\n        }\n    },\n    mounted: function() {\n        this.$nextTick(function() {\n            this.domLoad = echarts.init(document.getElementById('tetLoad'));\n            this.domCpu = echarts.init(document.getElementById('tetCpu'));\n            this.domMemory = echarts.init(document.getElementById('tetMemory'));\n            this.domDisk = echarts.init(document.getElementById('tetDisk'));\n            this.onInitialize(this.domLoad, '负载均衡', this.nowLoadData);\n            this.onInitialize(this.domCpu, 'CPU使用率', this.nowCpuData);\n            this.onInitialize(this.domMemory, '内存使用率', this.nowMemoryData);\n            this.onInitialize(this.domDisk, '硬盘使用率', this.nowDiskData);\n        })\n    },\n    methods: {\n        onInstallLamp: function() {\n            let that = this;\n            axios.post('/shell/lamp', {}, {})\n            .then(function(res){\n                if (res.data.status) {\n                    console.log(res);\n                } else {\n                    onTips(that, 'error', res.data.info);\n                }\n            })\n            .catch(function(err){\n                onTips(that, 'error', '网络错误~');\n            })\n        },\n        onInstallLnmp: function() {\n            let that = this;\n            axios.post('/shell/lnmp', {}, {})\n            .then(function(res){\n                if (res.data.status) {\n                    that.installDialog = false;\n                } else {\n                    onTips(that, 'error', res.data.info);\n                }\n            })\n            .catch(function(err){\n                onTips(that, 'error', '网络错误~');\n            })\n        },\n        axiosRound: function() {\n            let that = this;\n            axios.post('/api/round', {}, {})\n            .then(function(res){\n                console.log(res.data);\n                if (res.data.status) {\n                    let Data = res.data.data;\n                    that.getLoadData = Data.load;\n                    that.getCpuData = Data.cpu;\n                    that.getMemoryData = Data.memory;\n                    that.getDiskData = Data.disk;\n                } else {\n                    onTips(that, 'error', res.data.info);\n                }\n            })\n            .catch(function(err){\n                onTips(that, 'error', '网络错误~');\n            })\n        },\n        //初始化数据\n        onInitialize: function(myChart, Title, Data) {\n            var option = {\n                title: {\n                    text: Title,\n                    left: 'center',\n                    bottom: 4,\n                    textStyle: {\n                        fontSize: 16,\n                        fontWeight: 'normal',\n                        color: '#666666'\n                    }\n                },\n                tooltip: {\n                    show: true,\n                    confine: true,\n                    trigger: 'item',\n                    formatter: \"{a} <br/> 比例：( {d}% )\"\n                },\n                color: ['#b2b2b2', this.dangerColor],\n                calculable : false,\n                series: [{\n                    name: Title,\n                    type:'pie',\n                    radius: ['47%', '60%'],\n                    hoverAnimation: false,\n                    legendHoverLink: false,\n                    avoidLabelOverlap: false,\n                    label: {\n                        normal: {\n                            show: false,\n                            position: 'center'\n                        },\n                        emphasis: {\n                            show: false\n                        }\n                    },\n                    labelLine: {\n                        normal: {\n                            show: false\n                        }\n                    },\n                    data:[\n                        {value: (100-Data).toFixed(1), name: (100-Data).toFixed(1) + '%'},\n                        {value: Data.toFixed(1), name: Data.toFixed(1) + '%', label: {show: true , fontSize: '19',  fontWeight: 'bold'}},\n                    ]\n                }]\n            };\n            myChart.setOption(option);\n        },\n        //数据动态增减\n        onIncrease: function(myChart, nowData, getData) {\n            let that = this;\n            if (nowData != getData) {\n                let timer = setInterval(function() {\n                    if (nowData < getData) {\n                        nowData++;\n                        that.onApply(myChart, nowData);\n                        if (nowData >= getData) {\n                            that.nowLoadData = that.getLoadData;\n                            that.nowCpuData = that.getCpuData;\n                            that.nowMemoryData = that.getMemoryData;\n                            that.nowDiskData = that.getDiskData;\n                            clearInterval(timer);\n                        }\n                    }\n\n                    if (nowData > getData) {\n                        nowData--;\n                        that.onApply(myChart, nowData);\n                        if (nowData <= getData) {\n                            that.nowLoadData = that.getLoadData;\n                            that.nowCpuData = that.getCpuData;\n                            that.nowMemoryData = that.getMemoryData;\n                            that.nowDiskData = that.getDiskData;\n                            clearInterval(timer);\n                        }\n                    }\n                }, 45);\n            }\n        },\n        onApply: function(myChart, Data) {\n            let that = this;\n            Data > 68 ? (Data > 86 ? (this.dangerColor = '#b44038'):(this.dangerColor = '#c9856b')):(this.dangerColor = '#09BB07');\n            myChart.setOption({\n                animation: false,\n                color: ['#b2b2b2', this.dangerColor],\n                series: [{\n                    data:[\n                        {value: (100-Data).toFixed(1), name: (100-Data).toFixed(1)+ '%'},\n                        {value: Data.toFixed(1), name: Data.toFixed(1) + '%', label: {show: true , fontSize: '19',  fontWeight: 'bold'}},\n                    ]\n                }]\n            })\n        },\n        reLoad: function() {\n            let that = this;\n            if (!that.loading) {\n                that.loading = true;\n                that.loadTxt = '重启中...';\n                axios.post('/api/restart', {}, {})\n                .then(function(res) {\n                    if (res.data.status) {\n                        that.loading = false;\n                        that.loadTxt = '重启服务器';\n                    }\n                    console.log(res);\n                })\n                .catch(function(err) {\n                    console.log(err);\n                })\n            }\n        },\n        onCategroy: function(myChart, lastTime, nowTime, lastData, nowData) {\n            var option = {\n                color: ['#e64340', '#09BB07'],\n                tooltip: {\n                    trigger: 'none',\n                    axisPointer: {\n                        type: 'cross'\n                    }\n                },\n                legend: {\n                    data:['昨日流量', '今日流量']\n                },\n                grid: {\n                    top: 70,\n                    bottom: 42\n                },\n                xAxis: [\n                    {\n                        type: 'category',\n                        axisTick: {\n                            alignWithLabel: true\n                        },\n                        axisLine: {\n                            onZero: false,\n                            lineStyle: {\n                                color: '#333333'\n                            }\n                        },\n                        axisPointer: {\n                            label: {\n                                formatter: function (params) {\n                                    return '今日  ' + params.value\n                                        + (params.seriesData.length ? '：' + params.seriesData[0].data : '');\n                                }\n                            }\n                        },\n                        data: nowTime\n                    },\n                    {\n                        type: 'category',\n                        axisTick: {\n                            alignWithLabel: true,\n                        },\n                        axisLine: {\n                            onZero: false,\n                            lineStyle: {\n                                color: '#999999'\n                            }\n                        },\n                        axisPointer: {\n                            label: {\n                                formatter: function (params) {\n                                    return '昨日  ' + params.value\n                                        + (params.seriesData.length ? '：' + params.seriesData[0].data : '');\n                                }\n                            }\n                        },\n                        data: lastTime\n                    }\n                ],\n                yAxis: [\n                    {\n                        type: 'value'\n                    }\n                ],\n                series: [\n                    {\n                        name:'今日流量',\n                        type:'line',\n                        xAxisIndex: 1,\n                        smooth: true,\n                        data: nowData\n                    },\n                    {\n                        name:'昨日流量',\n                        type:'line',\n                        smooth: true,\n                        data: lastData\n                    }\n                ]\n            };\n            myChart.setOption(option);\n        }\n    }\n}\n"],"sourceRoot":""}]}